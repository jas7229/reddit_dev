<!DOCTYPE html>
<html>
<head>
    <title>Leaderboard Debug</title>
    <style>
        body { font-family: monospace; padding: 20px; background: #1a1a1a; color: #fff; }
        .player { margin: 10px 0; padding: 10px; background: #333; border-radius: 5px; }
        .error { color: #ff6b6b; }
        .success { color: #4ecdc4; }
        button { padding: 10px 20px; font-size: 16px; margin: 10px 0; }
    </style>
</head>
<body>
    <h1>üèÜ Avatar Arena Leaderboard Debug</h1>
    <button onclick="loadLeaderboard()">Load Leaderboard</button>
    <div id="results"></div>

    <script>
        async function loadLeaderboard() {
            const resultsDiv = document.getElementById('results');
            resultsDiv.innerHTML = '<p>Loading leaderboard...</p>';
            
            try {
                const response = await fetch('/api/leaderboard');
                const data = await response.json();
                
                if (data.status === 'success') {
                    let html = `<div class="success">‚úÖ Leaderboard loaded successfully!</div>`;
                    html += `<p><strong>Total Players:</strong> ${data.totalPlayers}</p>`;
                    
                    if (data.leaderboard && data.leaderboard.length > 0) {
                        html += '<h3>Top Players:</h3>';
                        data.leaderboard.forEach((player, index) => {
                            html += `
                                <div class="player">
                                    <strong>#${index + 1} ${player.username}</strong><br>
                                    Level: ${player.level} | 
                                    Battles Won: ${player.battlesWon} | 
                                    Score: ${player.score}<br>
                                    Avatar: <img src="${player.avatarUrl}" width="30" height="30" style="border-radius: 50%; vertical-align: middle;">
                                </div>
                            `;
                        });
                    } else {
                        html += '<p>No players found in leaderboard.</p>';
                    }
                } else {
                    html = `<div class="error">‚ùå Error: ${data.message || 'Unknown error'}</div>`;
                }
                
                resultsDiv.innerHTML = html;
                console.log('Full leaderboard data:', data);
                
            } catch (error) {
                resultsDiv.innerHTML = `<div class="error">‚ùå Network Error: ${error.message}</div>`;
                console.error('Leaderboard error:', error);
            }
        }
    </script>
</body>
</html>